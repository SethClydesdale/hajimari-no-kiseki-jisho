!function(e,t){"use strict";e.offlineEdge="file:"==e.location.protocol&&/Edge/.test(navigator.userAgent),e.storageOK=!(!navigator.cookieEnabled||offlineEdge||!e.localStorage),e.AeonSystem={kidou:function(){if(t.addEventListener("keyup",function(e){if(e.ctrlKey&&e.altKey){var o;switch(e.key.toLowerCase()){case"f":o=t.querySelector(".furigana-toggle");break;case"r":o=t.querySelector(".romaji-toggle");break;case"n":o=t.querySelector(".notes-toggle");break;case"s":o=t.querySelector(".spoilers-toggle")}o&&(e.preventDefault(),o.click())}}),"file:"==e.location.protocol)for(var o=0,s=(a=t.getElementsByTagName("A")).length;o<s;o++)/http/.test(a[o].href)||(/\/$/.test(a[o].href)?a[o].href+="index.html":/\/#.*?$/.test(a[o].href)?a[o].href=a[o].href.replace(/(#.*?)$/,"index.html$1"):/\/\?.*?$/.test(a[o].href)&&(a[o].href=a[o].href.replace(/(\?.*?)$/,"index.html$1")));var a;for(o=0,s=(a=t.querySelectorAll(".sub-group")).length;o<s;o++)a[o].parentNode.insertAdjacentHTML("afterBegin",'<button class="button sub-group-toggle" onclick="AeonSystem.toggleGroup(this);">＋</button>')},toggle:function(e){var o=storageOK&&localStorage[e+"State"]||"true";switch(o){case"true":o="false",t.body.className=t.body.className.replace(e+"-on",e+"-off");break;case"false":o="true",t.body.className=t.body.className.replace(e+"-off",e+"-on")}storageOK&&(localStorage[e+"State"]=o)},toggleGroup:function(e){var o=e.parentNode.querySelector(".sub-group"),s=t.querySelector(".sub-group.actiove");s&&s!=o&&(s.parentNode.querySelector(".sub-group-toggle").innerHTML="＋",s.className=s.className.replace("actiove","")),/actiove/.test(o.className)?(e.innerHTML="＋",o.className=o.className.replace("actiove","")):(e.innerHTML="－",o.className+=" actiove")},restoreSettings:function(){if(storageOK)for(var e=["furigana","romaji","notes","spoilers"],o=0,s=e.length;o<s;o++)"false"==localStorage[e[o]+"State"]&&(t.body.className=t.body.className.replace(e[o]+"-on",e[o]+"-off"))},limitBreak:function(e){if(AeonSystem.activated){if(!AeonSystem.animating){o=AeonSystem.getPaths();AeonSystem.audio.mysticCore.paused?(AeonSystem.audio.mysticCore.play(),e.parentNode.className="tio-limit-break",e.src=o+"aeon-system/images/tio-aeon-system.png"):(AeonSystem.audio.mysticCore.pause(),e.parentNode.className="",e.src=o+"aeon-system/images/tio-staff.png")}}else{var o=AeonSystem.getPaths();AeonSystem.activated=!0,AeonSystem.animating=!0,AeonSystem.intro=t.getElementById("intro-bubble"),AeonSystem.introText=AeonSystem.intro.innerHTML,t.body.className+=" aeon-system-active",AeonSystem.audio={kidou:t.getElementById("aeon-system-kidou"),limitBreak:t.getElementById("aeon-system-limit-break"),mysticCore:t.getElementById("mystic-core")},e.src=o+"aeon-system/images/tio-staff.png",AeonSystem.audio.kidou.play(),AeonSystem.intro.innerHTML='<span class="aeon-system-dialogue">Aeon system, activate.</span>',setTimeout(function(){AeonSystem.audio.mysticCore.play(),setTimeout(function(){e.src=o+"aeon-system/images/tio-aeon-system.png",setTimeout(function(){AeonSystem.audio.limitBreak.play(),AeonSystem.intro.innerHTML='<span class="aeon-system-dialogue">Aeon system, limit break!</span>',setTimeout(function(){e.parentNode.className="tio-limit-break",AeonSystem.animating=!1,setTimeout(function(){AeonSystem.intro.innerHTML='<span class="aeon-system-dialogue">You can stop the music at any time by *sigh* clicking me..</span>',setTimeout(function(){AeonSystem.intro.innerHTML=AeonSystem.introText},6e3)},1e3)},2200)},3e3)},500)},1e3)}},getPaths:function(){var t=e.location.pathname;return/\/contact\//.test(t)?"../":""},giveMishy:function(e){var o=t.getElementById("tio-plato"),s=t.getElementById("mishy");AeonSystem.audio2={ahMishy:t.getElementById("tio-ah-mishy"),mishy:t.getElementById("tio-mishy"),arigatou:t.getElementById("tio-arigatou")},e.style.visibility="hidden",e.onclick=null,s.style.visibility="",setTimeout(function(){o.src="aeon-system/images/tio-plato.png",AeonSystem.audio2.ahMishy.play(),setTimeout(function(){o.src="aeon-system/images/tio-plato-excited.png",setTimeout(function(){s.src="aeon-system/images/mishy-run.png",s.className="runLeft",o.className="runLeft",setTimeout(function(){s.className="runRight",o.className="runRight",setTimeout(function(){s.className="runBack",o.className="runBack",setTimeout(function(){s.style.display="none",o.className="",o.src="aeon-system/images/tio-and-mishy.png",AeonSystem.audio2.mishy.play(),setTimeout(function(){o.src="aeon-system/images/tio-and-mishy-excited.png",AeonSystem.audio2.arigatou.play()},1500)},3e3)},3e3)},3e3)},1e3)},1e3)},500)}}}(window,document);